<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Climate Benchmark Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Anybody:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@300;400;500&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
<style>
  :root {
    --bg: #07090C;
    --surface: #0D1117;
    --surface2: #131920;
    --border: #1B2430;
    --border-accent: #2A3A4E;
    --text: #D1D5DB;
    --text-muted: #6B7280;
    --text-dim: #3E4854;
    --heading: #F0F2F5;
    --accent: #E8720C;
    --accent-dim: #7A3D06;
    --green: #22C55E;
    --green-dim: #14532D;
    --yellow: #EAB308;
    --yellow-dim: #713F12;
    --red: #EF4444;
    --red-dim: #7F1D1D;
    --blue: #3B82F6;
    --blue-dim: #1E3A5F;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Source Serif 4', Georgia, serif;
    font-size: 15px;
    line-height: 1.7;
    -webkit-font-smoothing: antialiased;
  }

  /* ── TOPBAR ──────────────────────────────── */
  .topbar {
    position: sticky; top: 0; z-index: 100;
    background: rgba(7,9,12,0.88);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
    padding: 12px 32px;
    display: flex; align-items: center; gap: 16px;
  }
  .topbar-brand {
    font-family: 'IBM Plex Mono', monospace; font-size: 12px;
    color: var(--accent); letter-spacing: 0.5px;
    display: flex; align-items: center; gap: 6px;
    text-decoration: none;
  }
  .topbar .breadcrumb {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    color: var(--text-dim); letter-spacing: 0.5px;
  }

  /* ── HERO ────────────────────────────────── */
  .hero {
    padding: 64px 32px 48px;
    max-width: 1100px; margin: 0 auto;
    border-bottom: 1px solid var(--border);
  }
  .hero-label {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 3px; text-transform: uppercase;
    color: var(--accent); margin-bottom: 12px;
  }
  .hero h1 {
    font-family: 'Anybody', sans-serif; font-size: 42px;
    font-weight: 700; color: var(--heading); letter-spacing: -1px;
    line-height: 1.15; margin-bottom: 8px;
  }
  .hero-sub {
    font-size: 16px; color: var(--text-muted); margin-bottom: 24px;
  }
  .hero-meta {
    display: flex; flex-wrap: wrap; gap: 12px;
  }
  .meta-chip {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    padding: 6px 14px; border-radius: 6px;
    background: var(--surface2); border: 1px solid var(--border);
    color: var(--text-muted);
  }
  .meta-chip strong { color: var(--text); font-weight: 500; }

  /* ── LAYOUT ─────────────────────────────── */
  .page-container {
    max-width: 1100px; margin: 0 auto; padding: 0 32px 80px;
  }

  /* ── SECTION NAV ────────────────────────── */
  .section-nav {
    position: sticky; top: 49px; z-index: 90;
    background: rgba(7,9,12,0.92);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    padding: 0; margin-bottom: 40px;
    overflow-x: auto; white-space: nowrap;
    -ms-overflow-style: none; scrollbar-width: none;
  }
  .section-nav::-webkit-scrollbar { display: none; }
  .section-nav a {
    display: inline-block; padding: 14px 18px;
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    letter-spacing: 0.5px; color: var(--text-dim);
    text-decoration: none; border-bottom: 2px solid transparent;
    transition: all 0.2s; cursor: pointer;
  }
  .section-nav a:hover { color: var(--text-muted); }
  .section-nav a.active { color: var(--accent); border-bottom-color: var(--accent); }

  /* ── SECTION BLOCKS ─────────────────────── */
  .section {
    margin-bottom: 56px; scroll-margin-top: 120px;
    animation: fadeUp 0.5s ease both;
  }
  .section:nth-child(2) { animation-delay: 0.05s; }
  .section:nth-child(3) { animation-delay: 0.1s; }
  .section:nth-child(4) { animation-delay: 0.15s; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .section-header {
    display: flex; align-items: center; gap: 16px;
    margin-bottom: 24px; padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
  }
  .section-num {
    font-family: 'Anybody', sans-serif; font-size: 28px;
    font-weight: 300; color: var(--text-dim); min-width: 40px;
  }
  .section-title-group { flex: 1; }
  .section-esrs {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 1.5px; color: var(--accent-dim);
    text-transform: uppercase; margin-bottom: 2px;
  }
  .section-title {
    font-family: 'Anybody', sans-serif; font-size: 20px;
    font-weight: 600; color: var(--heading); letter-spacing: -0.3px;
  }

  /* ── STAT CARDS ─────────────────────────── */
  .card-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px; margin-bottom: 24px;
  }
  .card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 10px; padding: 20px;
    transition: transform 0.2s, box-shadow 0.2s;
  }
  .card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.3); }
  .card-label {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 1.5px; text-transform: uppercase;
    color: var(--text-dim); margin-bottom: 8px;
  }
  .card-value {
    font-family: 'Anybody', sans-serif; font-size: 32px;
    font-weight: 600; color: var(--heading); line-height: 1.1;
    margin-bottom: 4px;
  }
  .card-value.small { font-size: 22px; }
  .card-unit {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    color: var(--text-muted);
  }

  /* ── CHART CONTAINER ────────────────────── */
  .chart-container {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 10px; padding: 24px; margin-bottom: 24px;
  }
  .chart-title {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    letter-spacing: 1px; color: var(--text-muted);
    text-transform: uppercase; margin-bottom: 16px;
  }
  .chart-canvas-wrap { position: relative; width: 100%; }
  .chart-canvas-sm { max-height: 300px; }

  /* ── CHARTS ROW ─────────────────────────── */
  .charts-row {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 20px; margin-bottom: 24px;
  }
  .charts-row .chart-container { margin-bottom: 0; }
  .chart-wide { grid-column: 1 / -1; }

  /* ── DATA TABLE ─────────────────────────── */
  .data-table-wrap {
    overflow-x: auto; margin-bottom: 24px;
    border: 1px solid var(--border); border-radius: 10px;
    background: var(--surface);
  }
  .data-table {
    width: 100%; border-collapse: collapse;
    font-family: 'IBM Plex Mono', monospace; font-size: 12px;
  }
  .data-table th {
    text-align: left; padding: 12px 16px;
    font-size: 10px; letter-spacing: 1.5px; text-transform: uppercase;
    color: var(--text-dim); font-weight: 500;
    border-bottom: 1px solid var(--border);
    background: var(--surface2);
  }
  .data-table th:first-child { border-radius: 10px 0 0 0; }
  .data-table th:last-child { border-radius: 0 10px 0 0; }
  .data-table td {
    padding: 10px 16px; border-bottom: 1px solid var(--border);
    color: var(--text); vertical-align: middle;
  }
  .data-table tr:last-child td { border-bottom: none; }
  .data-table tbody tr { transition: background 0.15s; cursor: pointer; }
  .data-table tbody tr:hover td { background: rgba(232,114,12,0.03); }
  .data-table tbody tr.row-selected td { background: rgba(232,114,12,0.06); }
  .highlight { color: var(--accent); font-weight: 500; }

  /* ── BADGES ─────────────────────────────── */
  .maturity {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 1px; padding: 5px 12px;
    border-radius: 4px; text-transform: uppercase; font-weight: 500;
    white-space: nowrap;
  }
  .maturity.validated { background: var(--green-dim); color: var(--green); }
  .maturity.committed { background: var(--yellow-dim); color: var(--yellow); }
  .maturity.none { background: rgba(62,72,84,0.3); color: var(--text-dim); }

  .scope-badge {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 0.5px; padding: 4px 10px;
    border-radius: 4px; font-weight: 500;
  }
  .scope-badge.active { background: var(--blue-dim); color: var(--blue); }
  .scope-badge.inactive { background: rgba(62,72,84,0.2); color: var(--text-dim); }

  /* ── TEXT HELPERS ────────────────────────── */
  .text-green { color: var(--green); font-weight: 500; }
  .text-accent { color: var(--accent); font-weight: 500; }
  .text-muted { color: var(--text-dim); }

  /* ── REPORT LINK ────────────────────────── */
  .report-link {
    display: inline-flex; align-items: center; gap: 5px;
    color: var(--accent); text-decoration: none;
    font-size: 11px; font-weight: 500;
    transition: color 0.15s;
  }
  .report-link:hover { color: var(--yellow); text-decoration: underline; }
  .report-link svg { width: 12px; height: 12px; flex-shrink: 0; }

  /* ── DEEP DIVE LINK ─────────────────────── */
  .deepdive-link {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 0.5px; padding: 5px 14px;
    border-radius: 6px; text-decoration: none;
    background: var(--accent-dim); color: var(--accent);
    border: 1px solid var(--accent-dim);
    transition: all 0.2s; cursor: pointer;
    display: inline-flex; align-items: center; gap: 6px;
    white-space: nowrap;
  }
  .deepdive-link:hover {
    background: var(--accent); color: var(--bg);
    border-color: var(--accent);
  }

  /* ── DETAIL PANEL ───────────────────────── */
  .detail-panel {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 10px; padding: 24px; margin-bottom: 24px;
    animation: fadeUp 0.3s ease both;
  }
  .detail-panel-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 20px; padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
  }
  .detail-panel-header h2 {
    font-family: 'Anybody', sans-serif; font-size: 22px;
    font-weight: 600; color: var(--heading); letter-spacing: -0.3px;
  }
  .detail-close {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    background: transparent; border: 1px solid var(--border);
    color: var(--text-muted); border-radius: 6px;
    padding: 5px 14px; cursor: pointer; transition: all 0.15s;
  }
  .detail-close:hover { background: var(--surface2); color: var(--text); }

  .detail-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 0;
    border: 1px solid var(--border); border-radius: 10px;
    overflow: hidden; background: var(--surface);
    margin-bottom: 24px;
  }
  .detail-row {
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
  }
  .detail-row:nth-last-child(-n+2) { border-bottom: none; }
  .detail-key {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 1px; text-transform: uppercase;
    color: var(--text-dim); margin-bottom: 4px;
  }
  .detail-val {
    font-size: 14px; color: var(--heading); font-weight: 400;
  }
  .detail-val.accent { color: var(--accent); }
  .detail-val.green { color: var(--green); }
  .detail-val.muted { color: var(--text-muted); font-style: italic; }

  .detail-sub-heading {
    font-family: 'Anybody', sans-serif; font-size: 16px;
    font-weight: 600; color: var(--heading); margin-bottom: 12px;
  }
  .detail-highlights {
    list-style: none; display: grid;
    grid-template-columns: 1fr 1fr; gap: 8px;
    margin-bottom: 16px;
  }
  .detail-highlights li {
    position: relative; padding-left: 18px;
    font-size: 13px; color: var(--text-muted); line-height: 1.6;
  }
  .detail-highlights li::before {
    content: ""; position: absolute; left: 0; top: 8px;
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--accent);
  }

  /* ── DETAIL BUTTON ──────────────────────── */
  .detail-btn {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    letter-spacing: 0.5px;
    background: var(--surface2); color: var(--text-muted);
    border: 1px solid var(--border); border-radius: 6px;
    padding: 5px 14px; cursor: pointer; transition: all 0.15s;
  }
  .detail-btn:hover { background: var(--border); color: var(--text); }

  /* ── BAR CHARTS (custom HTML) ───────────── */
  .bar-row {
    display: flex; align-items: center; gap: 12px; margin-bottom: 10px;
  }
  .bar-label {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    color: var(--text-muted); min-width: 100px; text-align: right;
  }
  .bar-track {
    flex: 1; height: 20px; background: var(--surface2);
    border-radius: 4px; overflow: hidden;
  }
  .bar-fill {
    height: 100%; border-radius: 4px;
    transition: width 1s ease;
  }
  .bar-value {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    color: var(--text); min-width: 80px;
  }

  /* ── SOURCE NOTES ───────────────────────── */
  .source-note {
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    color: var(--text-dim); padding: 12px 16px;
    background: var(--surface2); border-radius: 6px;
    margin-top: 16px; line-height: 1.6;
  }

  /* ── FOOTER ─────────────────────────────── */
  .page-footer {
    border-top: 1px solid var(--border);
    padding: 32px 0;
    font-family: 'IBM Plex Mono', monospace; font-size: 10px;
    color: var(--text-dim); line-height: 1.8;
  }

  /* ── RESPONSIVE ─────────────────────────── */
  @media (max-width: 768px) {
    .charts-row { grid-template-columns: 1fr; }
    .card-grid { grid-template-columns: 1fr 1fr; }
    .detail-highlights { grid-template-columns: 1fr; }
    .detail-grid { grid-template-columns: 1fr; }
    .hero h1 { font-size: 28px; }
    .hero { padding: 40px 20px 32px; }
    .page-container { padding: 0 20px 60px; }
  }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
  const { useState, useEffect, useRef } = React;

  /* ───────── DATA ───────── */
  const companies = [
    { company: "Herbalife", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "2024", scope12: true, scope3: false, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["First climate scenario analysis (2025 TCFD)", "9/50 facilities use renewable electricity", "80% supplier assessments by 2025", "322 MT plastic removed"], lastUpdated: "2025",
      reportUrl: "https://ir.herbalife.com/sustainability", reportLabel: "2025 Climate Risk Report" },
    { company: "Mars", netZeroTarget: "2050", interimTarget2030: "50% absolute (all scopes)", baselineYear: "2015", scope12: true, scope3: true, sbtiStatus: "Validated - Net-Zero", reTarget: "100%", reTargetYear: "2040",
      highlights: ["16.4% absolute reduction achieved", "58% renewable electricity", "$1B+ net-zero investment", "60+ climate-smart ag projects"], lastUpdated: "2024",
      reportUrl: "https://www.mars.com/sustainability-plan/sustainability-reports", reportLabel: "2024 Sustainability Report",
      deepDive: "mars-climate-deepdive.html" },
    { company: "Kellanova", netZeroTarget: "2050", interimTarget2030: "Setting (SBTi committed)", baselineYear: "2015", scope12: true, scope3: true, sbtiStatus: "Committed - Net-Zero", reTarget: "100%", reTargetYear: "2030",
      highlights: ["Better Days Promise (4B people by 2030)", "SBTi Net-Zero committed Nov 2023", "30% water reduction in high-stress regions", "Pending Mars acquisition (2025)"], lastUpdated: "2023",
      reportUrl: "https://betterdayspromise.kellanova.com/sustainability", reportLabel: "Better Days Promise",
      deepDive: "kellanova-climate-deepdive.html" },
    { company: "Nu Skin", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "Not disclosed", scope12: false, scope3: false, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["100% products environmentally assessed", "All packaging recyclable/reusable by 2030", "100% RSPO palm sourcing", "40 tons plastic reduced"], lastUpdated: "2024",
      reportUrl: "https://ir.nuskin.com/financial-information/annual-reports/", reportLabel: "2024 Sustainability Report" },
    { company: "USANA", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "Not disclosed", scope12: false, scope3: false, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["58% SLC campus from solar/RECs", "57% operational waste diverted", "300K+ bottles of plastic saved", "SASB & UN SDGs aligned"], lastUpdated: "2024",
      reportUrl: "https://ir.usana.com/news-events/press-releases/detail/784/usana-releases-2024-sustainability-report", reportLabel: "2024 Sustainability Report" },
    { company: "Amway", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "Not disclosed", scope12: false, scope3: false, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["Wind power at Michigan HQ", "Solar at China manufacturing", "~6000 acres certified organic farmland", "234K lbs virgin plastic saved (2024)"], lastUpdated: "2024",
      reportUrl: "https://www.amwayglobal.com/impact-report/", reportLabel: "2024 Impact Report" },
    { company: "Medifast", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "Not disclosed", scope12: false, scope3: false, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["No standalone ESG report", "Sustainalytics ESG Risk Rating 34.8 (High)", "Industry rank 97/104", "No formal climate targets"], lastUpdated: "2024",
      reportUrl: "https://www.sustainalytics.com/esg-rating/medifast-inc/1008239122", reportLabel: "Sustainalytics ESG Rating" },
    { company: "BellRing Brands", netZeroTarget: "2030", interimTarget2030: "Net-zero Scope 1&2 by 2030", baselineYear: "2019", scope12: true, scope3: false, sbtiStatus: "None", reTarget: "100%", reTargetYear: "2025",
      highlights: ["Scope 1 reduced 490→228 MTCO2e", "Scope 2 reduced 1491→70 MTCO2e", "100% renewable electricity by 2025", "Supplier engagement on emissions"], lastUpdated: "2024",
      reportUrl: "https://bellring.com/energy-use", reportLabel: "2024 Impact Report" },
    { company: "Simply Good Foods", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "Not disclosed", scope12: true, scope3: true, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["Full GHG inventory (all scopes)", "LEED EB O&M Gold certifications", "Energy Star certified HQ", "Board-level ESG oversight"], lastUpdated: "2024",
      reportUrl: "https://www.thesimplygoodfoodscompany.com/investor-overview", reportLabel: "2024 Impact Update" },
    { company: "Post Holdings", netZeroTarget: "Not disclosed", interimTarget2030: "30% S1&2; 30% S3 intensity", baselineYear: "FY2020", scope12: true, scope3: true, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["15% Scope 1&2 reduction achieved", "CDP Score B / A- supplier engagement", "92% landfill diversion", "TCFD/GRI/SASB aligned"], lastUpdated: "2025",
      reportUrl: "https://www.postholdings.com/post-holdings-2025-sustainability-report/", reportLabel: "2025 Sustainability Report" },
    { company: "Hain Celestial", netZeroTarget: "Not disclosed", interimTarget2030: "42% S1&2; 25% S3", baselineYear: "FY2022", scope12: true, scope3: true, sbtiStatus: "Committed", reTarget: "100%", reTargetYear: "2025",
      highlights: ["42% Scope 1&2 reduction by FY2030", "Fruit waste-to-biogas at UK plant", "100% renewable energy by 2025", "Sustainalytics ESG Risk Rating 31.3"], lastUpdated: "2023",
      reportUrl: "https://www.hain.com/impact/esg-reports/", reportLabel: "2023 Impact Report",
      deepDive: "hain-celestial-climate-deepdive.html" },
    { company: "Isagenix", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "Not disclosed", scope12: false, scope3: false, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["Zero-waste packaging by 2028", ">50% bottles to 100% PCR plastic", "HQ solar ~463K kWh/yr", "3.2M sq ft cardboard saved/yr"], lastUpdated: "2024",
      reportUrl: "https://www.isagenixhealth.net/sustainable-changes-for-a-healthier-planet/", reportLabel: "Sustainability Page" },
    { company: "Shaklee", netZeroTarget: "Carbon neutral since 2000", interimTarget2030: "Beyond Carbon Neutral (all Scope 3)", baselineYear: "2000", scope12: true, scope3: false, sbtiStatus: "None", reTarget: "100%", reTargetYear: "Achieved",
      highlights: ["First certified Climate Neutral company", "100% renewable energy via RECs", "100% Scope 1&2 offset (Gold Standard)", "Third-party GHG inventory annually"], lastUpdated: "2023",
      reportUrl: "https://us.shaklee.com/en_US/s/climate-change", reportLabel: "Climate Change Page" },
    { company: "GNC", netZeroTarget: "Not disclosed", interimTarget2030: "Not disclosed", baselineYear: "Not disclosed", scope12: false, scope3: false, sbtiStatus: "None", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["No public ESG report", "Acquired by Harbin Pharmaceutical (2020)", "Now private, limited disclosure", "No formal climate targets"], lastUpdated: "N/A",
      reportUrl: null, reportLabel: null },
    { company: "Nestlé", netZeroTarget: "2050", interimTarget2030: "50.4% absolute (all scopes)", baselineYear: "2018", scope12: true, scope3: true, sbtiStatus: "Validated - Net-Zero", reTarget: "100%", reTargetYear: "2025",
      highlights: ["CHF 3.2B climate investment committed", "50.4% reduction target by 2030 (SBTi 1.5°C)", "49.3% renewable electricity (RE100)", "CHF 1.2B in regenerative agriculture"], lastUpdated: "2024",
      reportUrl: "https://www.nestle.com/sustainability/climate-change", reportLabel: "2024 Sustainability Report",
      deepDive: "nestle-climate-deepdive.html" },
    { company: "Danone", netZeroTarget: "2050", interimTarget2030: "46.3% S1&2; 42% S3; 30.3% FLAG", baselineYear: "2020", scope12: true, scope3: true, sbtiStatus: "Validated - Net-Zero", reTarget: "100%", reTargetYear: "2030",
      highlights: ["CDP Triple A — 5th consecutive year", "First SBTi FLAG targets approved", "30% methane reduction from dairy by 2030", "58,000+ farmer partners across 20 countries"], lastUpdated: "2024",
      reportUrl: "https://www.danone.com/impact/planet/climate-actions.html", reportLabel: "2024 Integrated Annual Report",
      deepDive: "danone-climate-deepdive.html" },
    { company: "Abbott", netZeroTarget: "Not disclosed", interimTarget2030: "30% S1&2 absolute", baselineYear: "2018", scope12: true, scope3: true, sbtiStatus: "Committed", reTarget: "Not disclosed", reTargetYear: "N/A",
      highlights: ["SBTi committed (well-below 2°C)", "~35% renewable electricity", "20+ year DJSI inclusion", "9 years third-party GHG assurance"], lastUpdated: "2024",
      reportUrl: "https://www.abbott.com/responsibility/sustainability.html", reportLabel: "2024 Sustainability Report",
      deepDive: "abbott-climate-deepdive.html" },
    { company: "Unilever", netZeroTarget: "2039", interimTarget2030: "Zero S1&2; 42% S3 energy; 30.3% FLAG", baselineYear: "2015", scope12: true, scope3: true, sbtiStatus: "Validated - Net-Zero", reTarget: "100%", reTargetYear: "Achieved",
      highlights: ["Net zero by 2039 — most aggressive in CPG", "100% RE electricity since 2020 (RE100 founder)", "CTAP approved by 97.5% of shareholders", ">EUR 1B saved through energy efficiency"], lastUpdated: "2024",
      reportUrl: "https://www.unilever.com/sustainability/climate/our-climate-transition-action-plan/", reportLabel: "2024 Climate Transition Action Plan",
      deepDive: "unilever-climate-deepdive.html" },
    { company: "Nike", netZeroTarget: "Not formally set", interimTarget2030: "65% S1&2; 30% S3 intensity", baselineYear: "FY2020", scope12: true, scope3: true, sbtiStatus: "Validated", reTarget: "100%", reTargetYear: "Achieved",
      highlights: ["96% renewable electricity globally", "69% reduction in Scope 1&2 vs FY2020", "Move to Zero campaign", "RE100 member, LEED-certified distribution"], lastUpdated: "2024",
      reportUrl: "https://www.nike.com/sustainability", reportLabel: "FY2024 Impact Report",
      deepDive: "nike-climate-deepdive.html" },
    { company: "IKEA", netZeroTarget: "Climate Positive 2030", interimTarget2030: "50% absolute GHG reduction", baselineYear: "FY2016", scope12: true, scope3: true, sbtiStatus: "Validated - Net-Zero", reTarget: "100%", reTargetYear: "Achieved",
      highlights: ["Climate positive by 2030 target", "EUR 7.5B+ invested in renewable energy", "935,000+ solar panels, 547 wind turbines", "Explicitly rejects carbon offsets"], lastUpdated: "2024",
      reportUrl: "https://www.inter.ikea.com/en/performance/climate-report", reportLabel: "2024 Climate Report",
      deepDive: "ikea-climate-deepdive.html" },
    { company: "Microsoft", netZeroTarget: "Carbon Negative 2030", interimTarget2030: "50%+ all scopes; carbon negative", baselineYear: "2020", scope12: true, scope3: true, sbtiStatus: "Committed", reTarget: "100%", reTargetYear: "2030",
      highlights: ["Carbon negative by 2030 commitment", "34 GW renewable energy contracted", "$1B Climate Innovation Fund", "World's largest corporate carbon removal buyer (~22M mt)"], lastUpdated: "2024",
      reportUrl: "https://www.microsoft.com/en-us/corporate-responsibility/sustainability/report", reportLabel: "2025 Environmental Sustainability Report",
      deepDive: "microsoft-climate-deepdive.html" },
  ];

  /* ───────── DERIVED STATS ───────── */
  const total = companies.length;
  const withNetZero = companies.filter(c => c.netZeroTarget !== "Not disclosed" && c.netZeroTarget !== "Carbon neutral since 2000" && c.netZeroTarget !== "Not formally set").length;
  const withSBTi = companies.filter(c => c.sbtiStatus !== "None").length;
  const withScope3 = companies.filter(c => c.scope3).length;
  const withRE = companies.filter(c => c.reTarget === "100%").length;
  const withInterim = companies.filter(c => c.interimTarget2030 !== "Not disclosed").length;
  const pct = (n) => Math.round((n / total) * 100) + "%";

  const activeCompanies = companies.filter(c =>
    c.scope12 || c.scope3 ||
    c.netZeroTarget !== "Not disclosed" ||
    c.interimTarget2030 !== "Not disclosed" ||
    c.sbtiStatus !== "None" ||
    c.reTarget === "100%"
  );

  /* ───────── CHART DEFAULTS ───────── */
  Chart.defaults.color = "#6B7280";
  Chart.defaults.borderColor = "#1B2430";
  Chart.defaults.font.family = "IBM Plex Mono";

  /* ───────── CHART COMPONENT ───────── */
  function ChartCanvas({ id, type, data, options }) {
    const canvasRef = useRef(null);
    const chartRef = useRef(null);
    useEffect(() => {
      if (chartRef.current) chartRef.current.destroy();
      const ctx = canvasRef.current.getContext("2d");
      chartRef.current = new Chart(ctx, { type, data, options });
      return () => { if (chartRef.current) chartRef.current.destroy(); };
    }, []);
    return <canvas ref={canvasRef} id={id}></canvas>;
  }

  /* ───────── CHART DATA ───────── */
  const sbtiChartData = {
    labels: ["Validated", "Committed", "None"],
    datasets: [{
      data: [
        companies.filter(c => c.sbtiStatus.startsWith("Validated")).length,
        companies.filter(c => c.sbtiStatus.startsWith("Committed") && !c.sbtiStatus.startsWith("Validated")).length,
        companies.filter(c => c.sbtiStatus === "None").length,
      ],
      backgroundColor: ["#22C55E", "#EAB308", "#3E4854"],
      borderWidth: 0, hoverOffset: 8,
    }],
  };

  const scopeChartData = {
    labels: ["Scope 1&2 + Scope 3", "Scope 1&2 Only", "No Disclosure"],
    datasets: [{
      data: [
        companies.filter(c => c.scope12 && c.scope3).length,
        companies.filter(c => c.scope12 && !c.scope3).length,
        companies.filter(c => !c.scope12 && !c.scope3).length,
      ],
      backgroundColor: ["#22C55E", "#3B82F6", "#3E4854"],
      borderWidth: 0, hoverOffset: 8,
    }],
  };

  const pieOptions = {
    responsive: true,
    plugins: {
      legend: { position: "bottom", labels: { padding: 16, usePointStyle: true, pointStyleWidth: 10, font: { size: 11 } } },
    },
    cutout: "55%",
  };

  /* ───────── SMALL COMPONENTS ───────── */
  function SBTiBadge({ status }) {
    const cls = status.startsWith("Validated") ? "maturity validated"
      : status.startsWith("Committed") ? "maturity committed" : "maturity none";
    const label = status.startsWith("Validated") ? "Validated"
      : status.startsWith("Committed") ? "Committed" : "None";
    return <span className={cls}>{label}</span>;
  }

  function ScopeBadge({ active, label }) {
    return <span className={active ? "scope-badge active" : "scope-badge inactive"}>{label}</span>;
  }

  const ExternalIcon = () => (
    <svg viewBox="0 0 20 20" fill="currentColor">
      <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
      <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
    </svg>
  );

  /* ───────── DASHBOARD ───────── */
  function Dashboard() {
    const [selectedCompany, setSelectedCompany] = useState(null);
    const selected = selectedCompany ? companies.find(c => c.company === selectedCompany) : null;

    const handleRowClick = (c) => {
      if (c.deepDive) {
        window.location.href = c.deepDive;
      } else {
        setSelectedCompany(selectedCompany === c.company ? null : c.company);
      }
    };

    return (
      <div>
        {/* Top Bar */}
        <nav className="topbar">
          <span className="topbar-brand">◆ Climate Benchmark</span>
          <span className="breadcrumb">/ Dashboard / Cross-Sector Climate Benchmark</span>
        </nav>

        {/* Hero */}
        <header className="hero">
          <div className="hero-label">Sector Climate Intelligence</div>
          <h1>Climate Benchmark Dashboard</h1>
          <p className="hero-sub">Sustainability & net-zero commitments across {total} companies spanning health, nutrition, CPG, retail & technology</p>
          <div className="hero-meta">
            <span className="meta-chip"><strong>{total}</strong> companies tracked</span>
            <span className="meta-chip"><strong>{withNetZero}</strong> net-zero targets</span>
            <span className="meta-chip"><strong>{withSBTi}</strong> SBTi engaged</span>
            <span className="meta-chip"><strong>{withScope3}</strong> Scope 3 reported</span>
            <span className="meta-chip"><strong>{withRE}</strong> with 100% RE target</span>
            <span className="meta-chip"><strong>{withInterim}</strong> with 2030 interim targets</span>
          </div>
        </header>

        {/* Page content */}
        <div className="page-container">

          {/* Section nav */}
          <nav className="section-nav">
            <a href="#overview" className="active">Overview</a>
            <a href="#sbti">SBTi & Scope</a>
            <a href="#breakdown">Company Breakdown</a>
          </nav>

          {/* ── SECTION 1: OVERVIEW ── */}
          <div className="section" id="overview">
            <div className="section-header">
              <span className="section-num">01</span>
              <div className="section-title-group">
                <div className="section-esrs">Benchmark Summary</div>
                <div className="section-title">Sector Overview</div>
              </div>
            </div>

            <div className="card-grid">
              <div className="card">
                <div className="card-label">Companies Tracked</div>
                <div className="card-value">{total}</div>
                <div className="card-unit">Cross-sector benchmark</div>
              </div>
              <div className="card">
                <div className="card-label">Net-Zero Targets</div>
                <div className="card-value" style={{color: "var(--green)"}}>{withNetZero}</div>
                <div className="card-unit">{pct(withNetZero)} of total</div>
              </div>
              <div className="card">
                <div className="card-label">SBTi Engaged</div>
                <div className="card-value" style={{color: "var(--yellow)"}}>{withSBTi}</div>
                <div className="card-unit">{pct(withSBTi)} of total</div>
              </div>
              <div className="card">
                <div className="card-label">Scope 3 Reported</div>
                <div className="card-value" style={{color: "var(--blue)"}}>{withScope3}</div>
                <div className="card-unit">{pct(withScope3)} of total</div>
              </div>
              <div className="card">
                <div className="card-label">100% RE Target</div>
                <div className="card-value" style={{color: "var(--green)"}}>{withRE}</div>
                <div className="card-unit">{pct(withRE)} of total</div>
              </div>
              <div className="card">
                <div className="card-label">2030 Interim Targets</div>
                <div className="card-value" style={{color: "var(--accent)"}}>{withInterim}</div>
                <div className="card-unit">{pct(withInterim)} of total</div>
              </div>
            </div>
          </div>

          {/* ── SECTION 2: SBTi & SCOPE ── */}
          <div className="section" id="sbti">
            <div className="section-header">
              <span className="section-num">02</span>
              <div className="section-title-group">
                <div className="section-esrs">Commitments Analysis</div>
                <div className="section-title">SBTi Status & Emissions Scope Coverage</div>
              </div>
            </div>

            <div className="charts-row">
              <div className="chart-container">
                <div className="chart-title">SBTi Status Distribution</div>
                <div className="chart-canvas-wrap chart-canvas-sm">
                  <ChartCanvas id="sbtiChart" type="doughnut" data={sbtiChartData} options={pieOptions} />
                </div>
              </div>
              <div className="chart-container">
                <div className="chart-title">Emissions Scope Coverage</div>
                <div className="chart-canvas-wrap chart-canvas-sm">
                  <ChartCanvas id="scopeChart" type="doughnut" data={scopeChartData} options={pieOptions} />
                </div>
              </div>
            </div>
          </div>

          {/* ── SECTION 3: COMPANY BREAKDOWN ── */}
          <div className="section" id="breakdown">
            <div className="section-header">
              <span className="section-num">03</span>
              <div className="section-title-group">
                <div className="section-esrs">Detailed Comparison</div>
                <div className="section-title">Company Breakdown ({activeCompanies.length} companies with climate data)</div>
              </div>
            </div>

            <div className="data-table-wrap">
              <table className="data-table">
                <thead>
                  <tr>
                    <th>Company</th>
                    <th>Net-Zero</th>
                    <th>2030 Interim Target</th>
                    <th>Scope 1&2</th>
                    <th>Scope 3</th>
                    <th>SBTi</th>
                    <th>RE Target</th>
                    <th>Report</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  {activeCompanies.map(c => (
                    <tr key={c.company} className={selectedCompany === c.company ? "row-selected" : ""}
                        onClick={() => handleRowClick(c)}>
                      <td className={c.deepDive ? "highlight" : ""} style={{fontWeight: 500, whiteSpace: "nowrap"}}>
                        {c.company}
                        {c.deepDive && <span style={{marginLeft: 8, fontSize: "9px", color: "var(--accent)", letterSpacing: "0.5px"}}>DEEP DIVE →</span>}
                      </td>
                      <td><span className={c.netZeroTarget !== "Not disclosed" && c.netZeroTarget !== "Not formally set" ? "text-green" : "text-muted"}>{c.netZeroTarget}</span></td>
                      <td style={{maxWidth: 180, fontSize: "11px"}}>{c.interimTarget2030 !== "Not disclosed" ? c.interimTarget2030 : <span className="text-muted">—</span>}</td>
                      <td><ScopeBadge active={c.scope12} label="S1&2" /></td>
                      <td><ScopeBadge active={c.scope3} label="S3" /></td>
                      <td><SBTiBadge status={c.sbtiStatus} /></td>
                      <td>{c.reTarget === "100%" ? <span className="text-green">100% {c.reTargetYear === "Achieved" ? "(Achieved)" : `by ${c.reTargetYear}`}</span> : <span className="text-muted">—</span>}</td>
                      <td>{c.reportUrl ? <a href={c.reportUrl} target="_blank" rel="noopener noreferrer" className="report-link" onClick={(e) => e.stopPropagation()}><ExternalIcon />{c.reportLabel}</a> : <span className="text-muted">—</span>}</td>
                      <td>
                        {c.deepDive ? (
                          <a href={c.deepDive} className="deepdive-link" onClick={(e) => e.stopPropagation()}>
                            View Deep Dive →
                          </a>
                        ) : (
                          <button className="detail-btn" onClick={(e) => { e.stopPropagation(); setSelectedCompany(selectedCompany === c.company ? null : c.company); }}>
                            {selectedCompany === c.company ? "Close" : "Details"}
                          </button>
                        )}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* Detail panel (non-Mars companies) */}
            {selected && !selected.deepDive && (
              <div className="detail-panel">
                <div className="detail-panel-header">
                  <h2>{selected.company}</h2>
                  <button className="detail-close" onClick={() => setSelectedCompany(null)}>✕ Close</button>
                </div>

                <div className="detail-grid">
                  <div className="detail-row">
                    <div className="detail-key">Net-Zero Target</div>
                    <div className={"detail-val" + (selected.netZeroTarget !== "Not disclosed" ? " green" : " muted")}>{selected.netZeroTarget}</div>
                  </div>
                  <div className="detail-row">
                    <div className="detail-key">2030 Interim</div>
                    <div className={"detail-val" + (selected.interimTarget2030 !== "Not disclosed" ? "" : " muted")}>{selected.interimTarget2030}</div>
                  </div>
                  <div className="detail-row">
                    <div className="detail-key">Baseline Year</div>
                    <div className="detail-val">{selected.baselineYear}</div>
                  </div>
                  <div className="detail-row">
                    <div className="detail-key">SBTi Status</div>
                    <div className={"detail-val" + (selected.sbtiStatus !== "None" ? " accent" : " muted")}>{selected.sbtiStatus}</div>
                  </div>
                  <div className="detail-row">
                    <div className="detail-key">RE Target</div>
                    <div className={"detail-val" + (selected.reTarget === "100%" ? " green" : " muted")}>{selected.reTarget}{selected.reTargetYear !== "N/A" ? ` by ${selected.reTargetYear}` : ""}</div>
                  </div>
                  <div className="detail-row">
                    <div className="detail-key">Report / Source</div>
                    <div className="detail-val">
                      {selected.reportUrl ? <a href={selected.reportUrl} target="_blank" rel="noopener noreferrer" className="report-link" style={{fontSize: 13}}><ExternalIcon />{selected.reportLabel}</a> : <span className="muted">Not available</span>}
                    </div>
                  </div>
                </div>

                <div className="detail-sub-heading">Key Initiatives</div>
                <ul className="detail-highlights">
                  {selected.highlights.map((h, i) => <li key={i}>{h}</li>)}
                </ul>
              </div>
            )}
          </div>

          {/* Footer */}
          <footer className="page-footer">
            <p><strong style={{color: "var(--text-muted)"}}>Data Notes</strong></p>
            <p>Data sourced from public sustainability reports, CDP disclosures, and company websites. Compiled February 2026. For benchmarking purposes only.</p>
          </footer>

        </div>
      </div>
    );
  }

  const root = ReactDOM.createRoot(document.getElementById("root"));
  root.render(<Dashboard />);

  /* Section nav active state */
  setTimeout(() => {
    const navLinks = document.querySelectorAll('.section-nav a');
    const sections = document.querySelectorAll('.section');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          navLinks.forEach(l => l.classList.remove('active'));
          const active = document.querySelector('.section-nav a[href="#' + entry.target.id + '"]');
          if (active) active.classList.add('active');
        }
      });
    }, { rootMargin: '-120px 0px -60% 0px' });
    sections.forEach(s => observer.observe(s));
  }, 500);
</script>
</body>
</html>
